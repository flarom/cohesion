<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Settings</title>
        <style>
            button.ball {
                width: 64px;
                height: 64px;
                border-radius: 32px;
                cursor: pointer;
                border: 0;
                box-shadow: var(--shadow);
                transition: border-radius 0.3s;
            }

            button.ball:hover {
                border-radius: 15px;
            }

            .settings-body {
                display: flex;
                justify-content: space-between;
                gap: 20px;
                padding: 10px;
            }

            .main-page {
                max-height: 500px;
                overflow-y: scroll;
                overflow-x: hidden;
                flex-grow: 1;
            }

            .side-nav {
                padding: 10px;
                min-width: 150px;
                position: sticky;
                top: 0;
                height: 100%;
                display: flex;
                flex-direction: column;
                gap: 10px;
            }

            .setting {
                padding: 20px;
                background-color: var(--background-color-2);
                border-radius: 15px;
                margin-bottom: 10px;
            }

            .setting.box {
                padding: 0px 20px 0px 20px;
                display: flex;
                align-items: center;
                justify-content: space-between;
            }

            @media screen and (max-width: 800px) {
                .settings-body {
                    display: block;
                }

                .side-nav {
                    flex-direction: row;
                    overflow: scroll;
                }
            }
        </style>
    </head>

    <body>
        <div class="settings-body">
            <nav class="side-nav">
                <a href="#theme">Theme</a>
                <a href="#fonts">Fonts</a>
                <a href="#editor">Editor</a>
                <a href="#status_bar">Status Bar</a>
                <a href="#data">My files</a>
            </nav>
            <div class="main-page">
                <div>
                    <h3 id="theme">Theme</h3>
                    <div class="setting" style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap">
                        <button class="ball" style="background-color: #ffffff; color: #000000" onclick="setSetting('theme', 'theme-epaper');loadSettings()">ePaper</button>
                        <button class="ball" style="background-color: #ffffff; color: #3c3c3c" onclick="setSetting('theme', 'theme-light');loadSettings()">Light</button>
                        <button class="ball" style="background-color: #f5eacb; color: #4b3a25" onclick="setSetting('theme', 'theme-cream');loadSettings()">Cream</button>
                        <button class="ball" style="background-color: #303030; color: #dddddd" onclick="setSetting('theme', 'theme-dark');loadSettings()">Dark</button>
                        <button class="ball" style="background-color: #1c1a17; color: #e0d6c0" onclick="setSetting('theme', 'theme-cream-dark');loadSettings()">Coffee</button>
                        <button class="ball" style="background-color: #000000; color: #888888" onclick="setSetting('theme', 'theme-oled');loadSettings()">OLED</button>
                    </div>
                </div>

                <div>
                    <h3 id="fonts">Fonts</h3>
                    <div class="setting">
                        <div>
                            <label>Editor font</label>
                            <input list="default-fonts" type="text" placeholder="Ubuntu Mono" id="fontEditor" oninput="setSetting('editorFont', this.value); loadSettings();" />
                        </div>
                        <div>
                            <label>Paragraph font</label>
                            <input list="default-fonts" type="text" placeholder="Ubuntu" id="fontParagraph" oninput="setSetting('paragraphFont', this.value); loadSettings();" />
                        </div>
                        <div>
                            <label>Title font</label>
                            <input list="default-fonts" type="text" placeholder="Ubuntu" id="fontTitle" oninput="setSetting('titleFont', this.value); loadSettings();" />
                        </div>
                        <div class="switch-wrapper">
                            <label class="switch">
                                <input type="checkbox" id="fontExtended" onchange="setSetting('fontExtended', this.checked); location.reload()" />
                                <span class="slider"></span>
                            </label>
                            <span class="switch-text" title="Use an expanded collection of fonts">Extended font collection</span>
                        </div>

                        <datalist id="default-fonts">
                            <option value="Ubuntu"></option>
                            <option value="Ubuntu Mono"></option>
                            <option value="Sans serif"></option>
                            <option value="Serif"></option>
                            <option value="Monospace"></option>
                            <option value="Cursive"></option>
                        </datalist>

                        <datalist id="extended-fonts">
                            <option value="Ubuntu"></option>
                            <option value="Ubuntu Mono"></option>
                            <option value="Sans serif"></option>
                            <option value="Serif"></option>
                            <option value="Monospace"></option>
                            <option value="Cursive"></option>
                            <!-- extended -->
                            <option value="Meow Script">Cute - Meow Script</option>
                            <option value="Cherry Bomb One">Cute - Cherry Bomb One</option>
                            <option value="Ms Madi">Cute - Ms Madi</option>
                            <option value="Comic Neue">Cute - Comic Neue</option>
                            <option value="Moirai One">Cute - Moirai One</option>
                        </datalist>
                    </div>
                </div>

                <div>
                    <h3 id="editor">Editor</h3>
                    <div class="setting" style="display: flex; flex-direction: column; gap: 5px">
                        <div class="switch-wrapper">
                            <label class="switch">
                                <input type="checkbox" id="editorShowHints" onchange="setSetting('editorShowHints', this.checked);" />
                                <span class="slider"></span>
                            </label>
                            <span class="switch-text">Auto-complete</span>
                        </div>
                        <div class="switch-wrapper">
                            <label class="switch">
                                <input type="checkbox" id="editorLineNumbers" onchange="setSetting('editorLineNumbers', this.checked); location.reload()" />
                                <span class="slider"></span>
                            </label>
                            <span class="switch-text">Line numbers</span>
                        </div>
                        <div class="switch-wrapper">
                            <label class="switch">
                                <input type="checkbox" id="editorDirection" onchange="if (this.checked) {setSetting('editorDirection', 'rtl')} else {setSetting('editorDirection', 'ltr')} location.reload()" />
                                <span class="slider"></span>
                            </label>
                            <span class="switch-text">RTL text align</span>
                        </div>
                    </div>
                </div>

                <div>
                    <h3 id="status_bar">Status bar</h3>
                    <div class="setting" style="display: flex; flex-direction: column; gap: 5px">
                        <div class="switch-wrapper">
                            <label class="switch">
                                <input type="checkbox" id="statusShow" onchange="setSetting('statusShow', this.checked); loadSettings()" />
                                <span class="slider"></span>
                            </label>
                            <span class="switch-text">Status bar</span>
                        </div>
                        <div style="padding-left: 20px; display: flex; flex-direction: column; gap: 5px">
                            <div class="switch-wrapper">
                                <label class="switch">
                                    <input type="checkbox" id="statusCursorPos" onchange="setSetting('statusCursorPos', this.checked); loadSettings()" />
                                    <span class="slider"></span>
                                </label>
                                <span class="switch-text">Cursor position</span>
                            </div>
                            <div class="switch-wrapper">
                                <label class="switch">
                                    <input type="checkbox" id="statusEditorMode" onchange="setSetting('statusEditorMode', this.checked); loadSettings()" />
                                    <span class="slider"></span>
                                </label>
                                <span class="switch-text">Editor mode</span>
                            </div>
                            <div class="switch-wrapper">
                                <label class="switch">
                                    <input type="checkbox" id="statusDocumentSize" onchange="setSetting('statusDocumentSize', this.checked); loadSettings()" />
                                    <span class="slider"></span>
                                </label>
                                <span class="switch-text">Document size</span>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h3 id="data">My files</h3>
                        <div>
                            <div class="setting box">
                                <div>
                                    <h4>Export package</h4>
                                    <p>Export your notes as a zip file</p>
                                </div>
                                <div>
                                    <button class="text-button" onclick="exportBook();">Export</button>
                                </div>
                            </div>

                            <div class="setting box">
                                <div>
                                    <h4>Import package</h4>
                                    <p>Import files from a zip file</p>
                                </div>
                                <div>
                                    <button class="text-button" onclick="importBook();">Import</button>
                                </div>
                            </div>

                            <div class="setting box">
                                <div>
                                    <h4>Delete empty files</h4>
                                    <p>Delete all files without any text or meta.</p>
                                </div>
                                <div>
                                    <button class="text-button danger" onclick="deleteEmptyFiles();">Delete</button>
                                </div>
                            </div>

                            <div class="setting box">
                                <div>
                                    <h4>Replace with package</h4>
                                    <p>Import files from a zip file, replacing your files.</p>
                                </div>
                                <div>
                                    <button class="text-button danger" onclick="importDeleteBook();">Replace</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            (() => {
                // fonts
                const txtFontEditor = document.getElementById("fontEditor");
                const txtFontParagraph = document.getElementById("fontParagraph");
                const txtFontTitle = document.getElementById("fontTitle");
                const cbxFontExtended = document.getElementById('fontExtended');
                txtFontEditor.value = getSetting("editorFont", "Ubuntu Mono");
                txtFontParagraph.value = getSetting("paragraphFont", "Ubuntu");
                txtFontTitle.value = getSetting("titleFont", "Ubuntu");
                if (getSetting("fontExtended", "false") === "true"){
                    cbxFontExtended.checked = "true";
                    txtFontEditor.setAttribute("list","extended-fonts");
                    txtFontParagraph.setAttribute("list","extended-fonts");
                    txtFontTitle.setAttribute("list","extended-fonts");
                }

                // editor
                const cbxEditorShowHints = document.getElementById("editorShowHints");
                const cbxEditorLineNumbers = document.getElementById("editorLineNumbers");
                const cbxEditorDirection = document.getElementById("editorDirection");
                if (getSetting("editorShowHints", "true") === "true") cbxEditorShowHints.checked = "true";
                if (getSetting("editorLineNumbers", "false") === "true") cbxEditorLineNumbers.checked = "true";
                if (getSetting("editorDirection", "rtl") === "rtl") cbxEditorDirection.checked = "true";

                // status bar
                const cbxStatusShow = document.getElementById("statusShow");
                const cbxStatusCursorPos = document.getElementById("statusCursorPos");
                const cbxStatusEditorMode = document.getElementById("statusEditorMode");
                const cbxStatusDocumentSize = document.getElementById("statusDocumentSize");
                if (getSetting("statusShow", "true") === "true") cbxStatusShow.checked = "true";
                if (getSetting("statusCursorPos", "true") === "true") cbxStatusCursorPos.checked = "true";
                if (getSetting("statusEditorMode", "true") === "true") cbxStatusEditorMode.checked = "true";
                if (getSetting("statusDocumentSize", "true") === "true") cbxStatusDocumentSize.checked = "true";
            })();
        </script>
    </body>
</html>
